# ğŸ§± AUDIT_TODO.md â€” Web-Sniffer : Plan dâ€™AmÃ©lioration Technique

## ğŸ”´ PRIORITÃ‰ 1 â€” Maintenance & FiabilitÃ© (immÃ©diate)
- [ ] **DÃ©dupliquer la fonction `fetch`**  
  Extraire la version commune dans `core/http_client.py` et supprimer les copies dans `run_google_scraper.py` et `scrapers/google_search_scraper.py`.

- [ ] **Refactoriser les scripts dâ€™exÃ©cution**  
  Transformer `multi_scrap.py` et `run_google_scraper.py` en runners testables (`def run_all()` / `main()` clair).  
  Supprimer la logique mÃ©tier directe du bloc `if __name__ == '__main__':`.

- [ ] **Renforcer la couverture de tests unitaires**  
  CrÃ©er des tests pour :
  - `core/http_client`
  - `core/parser`
  - `core/reporting`
  - Chaque scraper (mock `requests.get`)
  - Tests de parsing et fusion de rÃ©sultats

- [ ] **Centraliser les logs**  
  VÃ©rifier que tous les modules utilisent `core/logger` (pas de `print()` rÃ©siduel).

- [ ] **Isoler les fonctions de parsing**  
  Sâ€™assurer que toute la logique dâ€™extraction HTML/JSON est dans `core/parser`.

---

## ğŸŸ  PRIORITÃ‰ 2 â€” QualitÃ© de code & Outils
- [ ] **Introduire le typage statique (typing/mypy)**  
  Annoter progressivement toutes les signatures critiques (`fetch`, `parse`, `run_all`, etc.).

- [ ] **Mettre en place le linting & formatting automatique**  
  Ajouter `black`, `ruff` ou `flake8`, `isort`.  
  IntÃ©grer les rÃ¨gles dans CI.

- [ ] **CrÃ©er `requirements-dev.txt`**  
  Inclure : `pytest`, `requests-mock`, `black`, `ruff`, `mypy`, `pytest-cov`.

- [ ] **Configurer la CI/CD (GitHub Actions)**  
  - Lancer tests unitaires et linter sur chaque push/PR.  
  - Exemple minimal : `.github/workflows/ci.yml`.

- [ ] **Mesurer la couverture de tests (pytest-cov)**  
  Viser 70 % minimum Ã  court terme.

---

## ğŸŸ¡ PRIORITÃ‰ 3 â€” Architecture & ScalabilitÃ©
- [ ] **Introduire une Scraper Factory**  
  Enregistrer dynamiquement les scrapers disponibles (Ã©vite imports manuels).

- [ ] **CrÃ©er une classe `ScraperRunner`**  
  GÃ©rer lâ€™exÃ©cution multi-thread, les rapports et les erreurs.

- [ ] **Centraliser la configuration globale**  
  CrÃ©er `core/config.py` (timeouts, headers, user-agent, pause anti-429, etc.).

- [ ] **Isoler la configuration externe**  
  Charger `.env` via `dotenv`, mais ne jamais rÃ©fÃ©rencer `os.getenv` directement dans les scrapers.

- [ ] **Ajouter un mode â€œoffline testâ€ (cache)**  
  Permet de rejouer un run sans rescraper le web.

---

## ğŸŸ¢ PRIORITÃ‰ 4 â€” Documentation & Packaging
- [ ] **CrÃ©er `pyproject.toml`**  
  Rendre le projet installable (`pip install -e .`).

- [ ] **RÃ©diger un `README.md` clair et complet**  
  DÃ©crire :
  - Structure des dossiers  
  - Installation / dÃ©pendances  
  - Exemple dâ€™utilisation  
  - Lancement des tests

- [ ] **CrÃ©er `CONTRIBUTING.md`**  
  Expliquer conventions de code, commits, branches, et politique de merge.

- [ ] **Nettoyer `requirements.txt`**  
  Supprimer libs inutilisÃ©es et verrouiller les versions critiques.

- [ ] **Documenter les modules `core/`**  
  Ajouter des docstrings dÃ©taillÃ©es Ã  chaque fonction publique.

---

## âš™ï¸ BONUS â€” Optimisations & Ã‰volutivitÃ©
- [ ] **Ajouter une stratÃ©gie de retry/backoff dans `core/http_client`**  
  GÃ©rer automatiquement les erreurs 429 / timeouts avec pause progressive.

- [ ] **ImplÃ©menter un cache (SQLite ou JSON)**  
  Ã‰viter de rescraper la mÃªme URL plusieurs fois.

- [ ] **CrÃ©er un reporting enrichi (JSON/HTML)**  
  GÃ©nÃ©rer un tableau de bord avec taux de succÃ¨s, erreurs, temps moyen par site.

- [ ] **PrÃ©parer lâ€™API REST (FastAPI/Flask)**  
  Structurer `core/` pour hÃ©berger un futur module `api/`.

- [ ] **Renommer les fonctions / fichiers incohÃ©rents**  
  VÃ©rifier la cohÃ©rence snake_case / PascalCase, et la clartÃ© des noms.

---

## ğŸ§© PLAN Dâ€™ACTION SYNTHÃ‰TIQUE
| Vague | Objectif | TÃ¢ches concernÃ©es | DurÃ©e estimÃ©e |
|-------|-----------|------------------|----------------|
| **1ï¸âƒ£ Vague 1** | Nettoyage & testabilitÃ© | 1â€“5 | ~1 jour |
| **2ï¸âƒ£ Vague 2** | Outillage qualitÃ© | 6â€“10 | ~2 jours |
| **3ï¸âƒ£ Vague 3** | Architecture modulaire | 11â€“15 | ~3 jours |
| **4ï¸âƒ£ Vague 4** | Packaging & documentation | 16â€“20 | ~3 jours |
| **5ï¸âƒ£ Bonus** | ScalabilitÃ© & API future | 21â€“25 | libre |

---

âœ… **Objectif global** :  
Code centralisÃ©, testable, typÃ©, extensible et documentÃ© â€” prÃªt Ã  accueillir de nouveaux scrapers et une API de consultation.

